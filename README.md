# Para C Language

Язык в стиле C. Использует Flex и Bison для синтаксического и лексического анализа, а также для разбора.


`Flex` — инструмент для создания лексических анализаторов (сканеров) на основе регулярных выражений. `Bison` — генератор синтаксических анализаторов на основе контекстно-свободных грамматик.


## FRONTEND

- Лексический анализатор
- Синтансический анализатор ( или парсер )
- Семантический анализатор  ( или проверка типов )
- Генерация промежуточного кода ( AST )

### Лексический анализ

[Лексический анализатор](https://habr.com/ru/articles/713434/)  — часть компилятора, которая читает текст программы из входного потока и преобразовывает его в набор лексем или токенов (неделимые примитивы языка, такие как ключевые слова, идентификаторы, строковые и числовые константы, операторы и др), которые в простейшем случае представляют собой структуру содержащую информацию о типе прочитанного токена и его значение. Так же лексический анализатор часто убирает из выходного потока «шум» (конструкции языка, которые не влияют на дальнейший разбор программы, такие как комментарии и пробельные символы (в языках, где отступы не являются значимыми для разбора программы))


### Синтаксический анализ

Синтаксический анализатор (парсер) — часть компилятора, основной целью которой является анализ потока токенов на принадлежность грамматике конкретного языка.

Часто результатом работы парсера является AST, которое содержит всю необходимую информацию для дальнейших стадий компилятора.


## Запуск проекта
```bash
git  clone https://github.com/MaxGud10/ParaCL
cd ParaCL
mkdir build
```

### `Pежим Release`
1. Создадим виртуальную среду и установим Conan:

```bash
python3 -m venv .venv && source .venv/bin/activate && pip3 install conan
```

2. Установим зависимости проекта с помощью Conan:
```bash
conan install . --output-folder=third_party --build=missing
```

3. Создаем проект:
```bash
cmake -B build -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE=./third_party/conan_toolchain.cmake
cmake --build build
```

### `Режим Debug`

1. Создадим виртуальную среду и установим Conan:

```bash
python3 -m venv .venv && source .venv/bin/activate && pip3 install conan
```
2. Установим зависимости проекта с помощью Conan:
```bash
conan install . --output-folder=third_party --build=missing -s build=Debug
```
3. Создаем проект
```bash
cmake -B build -DCMAKE_BUILD_TYPE=Debug -DCMAKE_TOOLCHAIN_FILE=./third_party/conan_toolchain.cmake
cmake --build build
```

## Тесты
Проект содержит unit-тесты (GoogleTest)

1. Создайте тесты:
```bash
cmake --build build
```
2. Запустите тестовый двоичный файл:
```bash
cd build
ctest --output-on-failure
```

## GraphViz
- Чтобы сгенерировать `dump` AST-дерева необходимо, чтобы в вашей `root` директории проекта находилась папка `dumps`
- Она генерируется `cmake'ом`, но лучше перепроверить, что она у вас есть в следующем виде:
```
├── dumps
│   ├── dot
│   └── png
```

⚠️ Если хотите сгененировать dump, то вызывайте его из корня проекта. В будущем мы это пофиксим, но пока что будет работать только так.

###### Инструкция по дампу
1. `./paracl file.dat --dump`. Это флаг для дампа.
    - он генерирует `.dot` в директории `dumps/dot`
2. `python3 dot2png.py` - это [скрипт](./dot2png.py) для генерации `.png` картинки из `.dot` файла.





